# Руководство по созданию уровней для "ZOV Escape"

Этот документ описывает процесс создания и редактирования игровых уровней.

## 1. Структура файла уровня

Каждый уровень представляет собой отдельный JSON-файл, расположенный в директории `/src/levels/`.

- **Именование:** Файлы должны быть названы по шаблону `level-X.json`, где `X` — это порядковый номер уровня (например, `level-1.json`, `level-15.json`).

- **Формат содержимого:** JSON-файл уровня должен содержать объект со следующими полями:
  - `id` (число): Номер уровня. **Должен совпадать с номером в имени файла.**
  - `layout` (массив строк): Визуальное представление карты, где каждая строка — это ряд сетки.

### Пример `level-1.json`:
```json
{
  "id": 1,
  "layout": [
    "WWWWWWWWWWWWWWWWWWW",
    "WS_W______W_______W",
    "W__W_WWWW_W_WWWW__W",
    "W__W______W_______W",
    "W__WWWWWW_WWWWWW__W",
    "W_________________W",
    "W__WWWWWW_WWWWWW__W",
    "W______W______W_E_W",
    "WWWWWWWWWWWWWWWWWWW"
  ]
}
```

## 2. Легенда символов

При составлении поля `layout` используйте следующие символы для обозначения игровых объектов:

| Символ | Объект             | Тип (`CellType`) | Описание                                       |
|:------:|--------------------|------------------|------------------------------------------------|
| **`W`**  | Стена (бетон)      | `WALL`           | Непроходимое препятствие.                      |
| **`B`**  | Стена (кирпич)     | `WALL_BRICK`     | Визуально другой тип стены.                    |
| **`_`**  | Пустое место       | `EMPTY`          | Свободная для перемещения клетка.              |
| **` `**  | (Пробел)           | `EMPTY`          | Альтернатива `_` для лучшей читаемости.        |
| **`S`**  | **Старт**          | `START`          | Точка появления заключенного. **Обязателен.**   |
| **`E`**  | **Выход**          | `END`            | Цель уровня. **Обязателен.**                   |
| **`G`**  | Охранник           | `GUARD`          | Препятствие с высоким "весом" пути.            |
| **`T`**  | Блатные            | `THUG`           | Препятствие с низким "весом" пути.             |
| **`p`**  | Доски              | `PLANK`          | Разрушаемая стена (требует Лом).               |
| **`c`**  | Лом                | `CROWBAR`        | Предмет для разрушения Досок.                  |
| **`1`**  | Красная дверь      | `DOOR_RED`       | Закрытая дверь (требует Красный ключ).         |
| **`!`**  | Красный ключ       | `KEY_RED`        | Предмет для открытия Красной двери.            |
| **`2`**  | Синяя дверь        | `DOOR_BLUE`      | Закрытая дверь (требует Синий ключ).           |
| **`@`**  | Синий ключ         | `KEY_BLUE`       | Предмет для открытия Синей двери.              |

## 3. Ключевые правила проектирования

1.  **Прямоугольная форма:** Все строки в массиве `layout` **должны иметь одинаковую длину**, чтобы карта была прямоугольной.
2.  **Обязательные элементы:** Каждый уровень **обязательно** должен содержать один символ `S` (Старт) и один `E` (Выход). В противном случае уровень не загрузится.
3.  **Проходимость:** Убедитесь, что от старта (`S`) до выхода (`E`) существует хотя бы один возможный путь. Уровни без решения не могут быть пройдены.
4.  **Кодировка:** Сохраняйте файлы в кодировке UTF-8.
5.  **Валидный JSON:** Следите за синтаксисом JSON. Все строки должны быть в двойных кавычках, а после последней строки в массиве `layout` не должно быть запятой.

## 4. Процесс добавления нового уровня

1.  Создайте новый файл в `src/levels/`, например, `level-16.json`.
2.  Скопируйте структуру из существующего уровня.
3.  Измените поле `id` на `16`.
4.  Нарисуйте новую карту в поле `layout`, используя символы из легенды.
5.  Проверьте, что все правила проектирования соблюдены.
6.  Добавьте новый уровень в `initialLevels` в файле `src/store/selectStore.ts`, увеличив длину массива.

---
*Последнее обновление: 24.05.2024*